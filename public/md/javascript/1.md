# 手写reduce

所有者: Stan

1. `reduce` 是 JavaScript 数组方法，用于将数组**按顺序遍历**并将结果**累积成单个值**。
2. `callbackFn(accumulator, currentValue, currentIndex, array)`
    - **accumulator**：累加器（上一次返回的结果）
    - **currentValue**：当前元素
    - **currentIndex**：当前索引
    - **array**：原数组本身

实现注意事项：

1. 注意错误处理
2. 数组可能为稀疏数组 `i in array` 避免让undefined进行运算
3. 数组可视为对象。`prop in object` 检查它（或其原型链）是否包含具有指定名称的属性的对象。`return boolean`

```javascript
function reduce(array, callback, initialValue) {
      if (!Array.isArray(array)) {
          throw new TypeError("array 不是数组");
      }

      if (typeof callback !== "function") {
          throw new TypeError("callback 不是function");
      }

      let acc;
      let startIndex;

      if (arguments.length >= 3) {
          acc = initialValue;
          startIndex = 0;
      } else {
          if (array.length === 0) {
              throw new TypeError("数组长度为0");
          }

          let found = false;
          for (let i = 0; i < array.length; i++) {
              if (i in array) {
                  acc = array[i];
                  startIndex = i + 1;
                  found = true;
                  break;
              }
          }
          if (!found) {
              throw new TypeError("数组存在异常");
          }
      }

      for (let i = startIndex; i < array.length; i++) {
          if (i in array) {
              acc = callback(acc, array[i], i, array);
          }
      }

      return acc;
  }
```